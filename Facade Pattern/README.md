# 外观模式

**注意：本例源自书中内容，没有教导任何人炒股的意思。**

以股票为例。普通新手买股票，一般会选几个股票。要自己看软件，要看各种行情，会很累，很大程度会赔钱。如果选择基金，将投资者分散的钱管理起来，由专门的人打理，买一些股票。获取收益后，管理机构抽一些，投资者抽一些。对于初学者而言，这会很简单，不会像买股一样很盲目。

众多投资者和股票耦合度高，且操作不当，导致软件的耦合度过高。有了基金后，投资者可以只和基金经理打交道。这就是外观模式。

股票版本的代码，很是繁琐：

```cpp
g1 = new stock1();
g2 = new stock2();
g3 = new stock3();

g1.buy();
g2.buy();
g3.buy();

g1.sell();
g2.sell();
g3.sell();
```

---

- `stock.h` 股票基类，给出虚函数
- `stock1.h` 继承股票类，实现具体方法
- `stock2.h` 继承股票类，实现具体方法
- `fund.h` 基金类，实现外观
- `main.cpp` g++ 编译运行

外观模式：为子系统中的一组接口（各个股票都有买、卖操作）提供一个一致的界面，此模式定义了一个高层接口（基金的买和卖），这个接口使得子系统更加容易使用。使用场景：

1. 设计初期，有意识的将两个层分离，在层与层之间建立外观。为复杂的子系统提供接口，降低耦合度。
2. 开发阶段，系统因不断的重构演化变得越来越复杂，变成很多小类，外部调用困难。增加外观，提供简单接口，减少依赖。
3. 对于难以维护的复杂老系统，直接改或扩展都可能有问题。此时可以分两个小组：一个开发外观模式与老系统的交互，另一个了解外观模式的接口，新系统调用接口即可。