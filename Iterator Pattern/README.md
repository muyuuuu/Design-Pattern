# 迭代器模式

以上车买票为例，不管是什么人，老人，小孩等，乘务员都需要遍历所有人，让它们买票。

提供一种方法，顺序访问一个聚集对象中的各个元素，又不暴露该对象的内部显示。

当需要访问一个聚集对象，不管这些对象是什么，都需要遍历，就考虑使用迭代器模式。需要对聚集有多种遍历方式时（从后往前，从前往后等），也可以考虑迭代器模式。为遍历不同的聚集结构，提供如何开始、下一个、是否结束、当前项等统一接口。如 `python` 的迭代器等。

---

书中使用的万物的基类 `object` 实现，于是我掏出了 C++ 的模板。

- `iterator.h` 迭代器类，虚基类，指定接口
- `aggregate.h`，聚集类，虚基类，指定创建一个迭代器
- `concreteagg.h`，具体的聚集类，创建迭代器，实现具体的返回元素，下一个元素等操作
- `concreteit.h`，具体的迭代器类，调用 concreteagg.h 中的方法，对容器进行遍历
- `main.cpp`，g++ 编译运行

---

迭代器分离了集合对象的遍历行为，抽出一个迭代器类来负责，不暴露集合内部的数据结构，又可以让外部代码透明访问集合内的元素。其实高级语言对这个东西进行了封装。